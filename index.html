<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="chat-box"></div>
    <form class="send-message">
        <input class="message-input" />
        <button type="submit">Send</button>
    </form>
</body>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io();

    const form = document.querySelector('.send-message')
    const msgI = document.querySelector('.message-input')
    const chatBox = document.querySelector('.chat-box');

    form.addEventListener('submit', (e) => handleSubmit(e))

    function handleSubmit(e) {
        e.preventDefault()
        const message = msgI.value;
        socket.emit("message", message)
        message = ""
    }

    socket.on("chat-message", (msg) => {
        appendMessage(msg.message)
    })

    function appendMessage(message) {
        const messageElement = document.createElement('div');
        const pElement = document.createElement('p');
        pElement.innerText = message;
        messageElement.appendChild(pElement);
        chatBox.append(messageElement);
    }

</script>

</html>